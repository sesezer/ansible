# ---

  - hosts: linux
    
    
    tasks:
    - name: update apt cache
      ansible.builtin.package:
        update_cache: yes
        upgrade: dist
      when: ansible_distribution == "Ubuntu"
    - name: update & upgrade        
      ansible.builtin.package:
        update_cache: yes
        update_only: yes
      when: ansible_distribution == "CentOS"
    
      
########## build frontend
  - hosts: frontend
    tasks:
      - name: import vars
        ansible.builtin.include_vars:
          "vars/{{ ansible_distribution }}.yaml"
          
      - name: build frontend
        
              
        ansible.builtin.package:
          name:
            - '{{ apache_server }}'
          state: latest
      
######## build database  
  - hosts: database
    tasks:
      - name: import vars
        ansible.builtin.include_vars:
          "vars/{{ ansible_distribution }}.yaml"
          
      - name: mariadb
        
              
        ansible.builtin.package:
          name:
            - '{{ mariadb }}'
          state: latest

######## build ftp server        
  - hosts: ftp_server
    tasks:
      - name: import vars
        ansible.builtin.include_vars:
          "vars/{{ ansible_distribution }}.yaml"
          
      - name: ftp server install
        
              
        ansible.builtin.package:
          name:
            - '{{ ftpserver }}'
          state: latest
    
  
        
        
        