# ---

  # - hosts: linux
  #   #tags: always
  #   tags: never
  #   tasks:
  #   - name: update apt cache
  #     ansible.builtin.package:
  #       update_cache: yes
  #       upgrade: dist
  #     when: ansible_distribution == "Ubuntu"
  #   - name: update & upgrade        
  #     ansible.builtin.package:
  #       update_cache: yes
  #       update_only: yes
  #     when: ansible_distribution == "CentOS"

  
  - hosts: controller
    name: pull git weppage to local
    vars_files: vars/variables.yml
    tasks:      
      - name: git
        tags: git
        ansible.builtin.git:
          force: yes
          repo: "{{ git_repo }}"
          dest: "{{ git_destination }}"


#####################################################
#################### build frontend ####################
  - hosts: frontend
    tags: frontend
    vars_files: vars/variables.yml
    tasks:
      - name: import vars 
        ansible.builtin.include_vars:
          "vars/{{ ansible_distribution }}.yaml"
          
      - name: build frontend             
        ansible.builtin.package:
          name:
            - '{{ apache_server }}'
          state: latest
      - name: copy weppage
        ansible.builtin.copy:
          src: "{{ source_path }}"
          dest: "{{ destination_path }}"
          group: root
          owner: root
          mode: 644
# ########################################################     
# ################ build database #######################
#   - hosts: database
#     tags: database
#     tasks:
#       - name: import vars
#         ansible.builtin.include_vars:
#           "vars/{{ ansible_distribution }}.yaml"
          
#       - name: mariadb
                      
#         ansible.builtin.package:
#           name:
#             - '{{ mariadb }}'
#           state: latest
# ########################################################
# ################### build ftp server ################        
#   - hosts: ftp_server
#     tags: ftp_server
    
#     tasks:
#       - name: import vars    
#         ansible.builtin.include_vars:
#           "vars/{{ ansible_distribution }}.yaml"
          
#       - name: ftp server install      
#         ansible.builtin.package:
#           name:
#             - '{{ ftpserver }}'
#           state: latest
    
  
  
        